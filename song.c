#include "PSG.h"


unsigned char invention_13_two_part[] = {
// 
//  note frequency   per voice
// 
//  fake intro
//  0,0, 
//  0,0, 
//  0,0, 
//  0,0, 

//   0,23,
//   0,23,
//   0,23,
//   0,23,

//   0,11,
//   0,11,
//   0,11,
//   0,11,

//   0,23,
//   0,23,
//   0,23,
//   0,23,

//   0,11,
//   0,11,
//   0,11,
//   0,11,

//  bar 1
  0,11   , // 0, a2
  30,11   , // e4, a2
  35,23   , // a4, a3
  38,23   , // c5, a3
  37,23   , // b4, a3
  30,23   , // e4, a3
  37,22   , // b4, gs3
  40,22   , // d5, gs3
  38,23   , // c5, a3
  38,18   , // c5, e3
  42,23   , // e5, a3
  42,26   , // e5, c4
  34,25   , // gs4, b3
  34,18   , // gs4, e3
  42,25   , // e5, b3
  42,28   , // e5, d4
//  bar 2
  35,26   , // a4, c3
  30,26   , // e4, c3
  35,23   , // a4, a2
  38,23   , // c5, a2
  37,22   , // b4, gs3
  30,22   , // e4, gs3
  37,18   , // b4, e3
  40,18   , // d5, e3
  38,23   , // c5, a3
  38,18   , // c5, e3
  35,23   , // a4, a3
  35,26   , // a4, c4
  0,25   , // 0, b3
  0,18   , // 0, e3
  0,25   , // 0, b3
  0,28   , // 0, d4
//  bar 3
  0,26   , // 0, c4
  42,26   , // e5, c4
  38,23   , // c5, a3
  42,23   , // e5, a3
  35,26   , // a4, c4
  38,26   , // c5, c4
  30,23   , // e4, a3
  33,23   , // g4, a3
  31,28   , // f4, d4
  31,23   , // f4, a3
  35,19   , // a4, f3
  35,23   , // a4, a3
  40,16   , // d5, d3
  40,19   , // d5, f3
  43,11   , // f5, a2
  43,14   , // f5, c3
//  bar 4
  43,13   , // f5, b2
  40,13   , // d5, b2
  37,16   , // b4, d3
  40,16   , // d5, d3
  33,21   , // g4, g3
  37,21   , // b4, g3
  28,25   , // d4, b3
  31,25   , // f4, b3
  30,25   , // e4, b3
  30,21   , // e4, g3
  33,18   , // g4, e3
  33,21   , // g4, g3
  38,14   , // c5, c3
  38,18   , // c5, e3
  42,9   , // e5, g2
  42,13   , // e5, b2
//  bar 5
  42,11   , // e5, a2
  38,11   , // c5, a2
  35,14   , // a4, c3
  38,14   , // c5, c3
  31,16   , // f4, d3
  31,19   , // f4, f3
  40,13   , // d5, b2
  40,16   , // d5, d3
  40,9   , // d5, g2
  37,9   , // b4, g2
  33,13   , // g4, b2
  37,13   , // b4, b2
  30,14   , // e4, c3
  30,18   , // e4, e3
  38,11   , // c5, a2
  38,14   , // c5, c3
//  bar 6
  38,7   , // c5, f2
  35,7   , // a4, f2
  31,4   , // f4, d2
  35,4   , // a4, d2
  28,9   , // d4, g2
  28,21   , // d4, g3
  37,19   , // b4, f3
  37,21   , // b4, g3
  38,11   , // c5, a2
  38,21   , // c5, g3
  0,26   , // 0, c4
  0,30   , // 0, e4
  0,28   , // 0, d4
  0,21   , // 0, g3
  0,28   , // 0, d4
  0,31   , // 0, f4
//  bar 7
  0,30   , // 0, e4
  33,30   , // g4, e4
  38,26   , // c5, c4
  42,26   , // e5, c4
  40,25   , // d5, b3
  33,25   , // g4, b3
  40,21   , // d5, g3
  43,21   , // f5, g3
  42,26   , // e5, c4
  42,21   , // e5, g3
  45,26   , // g5, c4
  45,30   , // g5, e4
  37,28   , // b4, d4
  37,21   , // b4, g3
  45,28   , // g5, d4
  45,31   , // g5, f4
//  bar 8
  38,30   , // c5, e4
  33,30   , // g4, e4
  38,26   , // c5, c4
  42,26   , // e5, c4
  40,0   , // d5, 0
  33,0   , // g4, 0
  40,0   , // d5, 0
  43,0   , // f5, 0
  42,0   , // e5, 0
  42,33   , // e5, g4
  38,30   , // c5, e4
  38,33   , // c5, g4
  45,26   , // g5, c4
  45,30   , // g5, e4
  42,21   , // e5, g3
  42,25   , // e5, b3
//  bar 9
  50,23   , // c6, a3
  47,23   , // a5, a3
  42,26   , // e5, c4
  47,26   , // a5, c4
  38,30   , // c5, e4
  42,30   , // e5, e4
  35,33   , // a4, g4
  38,33   , // c5, g4
  40,32   , // d5, fs4
  40,35   , // d5, a4
  44,28   , // fs5, d4
  44,32   , // fs5, fs4
  47,23   , // a5, a3
  47,28   , // a5, d4
  50,20   , // c6, fs3
  50,35   , // c6, a4
//  bar 10
  49,21   , // b5, g3
  45,21   , // g5, g3
  40,25   , // d5, b3
  45,25   , // g5, b3
  37,28   , // b4, d4
  40,28   , // d5, d4
  33,32   , // g4, fs4
  37,32   , // b4, fs4
  38,30   , // c5, e4
  38,32   , // c5, fs4
  42,26   , // e5, c4
  42,30   , // e5, e4
  45,21   , // g5, g3
  45,26   , // g5, c4
  49,18   , // b5, e3
  49,21   , // b5, g3
//  bar 11
  47,20   , // a5, fs3
  44,20   , // fs5, fs3
  41,23   , // ds5, a3
  44,23   , // fs5, a3
  37,25   , // b4, b3
  40,25   , // d5, b3
  32,29   , // fs4, ds4
  35,29   , // a4, ds4
  33,0   , // g4, 0
  33,30   , // g4, e4
  45,26   , // g5, c4
  45,30   , // g5, e4
  45,23   , // g5, a3
  42,26   , // e5, c4
  38,30   , // c5, e4
  42,33   , // e5, g4
//  bar 12
  35,32   , // a4, fs4
  35,28   , // a4, d4
  44,25   , // fs5, b3
  44,28   , // fs5, d4
  44,21   , // fs5, g3
  40,25   , // d5, b3
  37,28   , // b4, d4
  40,32   , // d5, fs4
  33,30   , // g4, e4
  33,26   , // g4, c4
  42,23   , // e5, a3
  42,26   , // e5, c4
  42,20   , // e5, fs3
  38,23   , // c5, a3
  35,26   , // a4, c4
  38,26   , // c5, c4
//  bar 13
  32,26   , // fs4, c4
  45,25   , // g5, b3
  44,26   , // fs5, c4
  42,25   , // e5, b3
  41,26   , // ds5, c4
  44,26   , // fs5, c4
  37,13   , // b4, b2
  41,13   , // ds5, b2
  42,18   , // e5, e3
  42,30   , // e5, e4
  0,25   , // 0, b3
  0,21   , // 0, g3
  0,18   , // 0, e3
  0,13   , // 0, b2
  0,13   , // 0, b2
  0,13   , // 0, b2

  0, 0,
  0, 0,
  0, 0,
  0, 0,

  255,255 // = DONE
};

Voice voice1;
unsigned int position = 0;

void song_init()
{
    position = 0;
}

void song_play()
{
    int note;

    if (invention_13_two_part[ position * 2 ] == 255
        && invention_13_two_part[ position * 2 + 1 ] == 255)
        position = 0;

    note = getTunedNote( invention_13_two_part[ position * 2 ] );
    voice1.frequency  = note;
    voice1.channel    = note? PSG_CHANNEL_BOTH : PSG_CHANNEL_OFF;
    voice1.volume     = PSG_VOLUME_MAX;
    voice1.waveform   = PSG_WAVE_SAWTOOTH;
    voice1.pulseWidth = PSG_PULSE_SQUARE;
    defineVoice( 0, &voice1 );

    note = getTunedNote( invention_13_two_part[ position * 2 + 1 ] );
    voice1.frequency  = note;
    voice1.channel    = note? PSG_CHANNEL_BOTH : PSG_CHANNEL_OFF;
    voice1.volume     = PSG_VOLUME_MAX;
    voice1.waveform   = PSG_WAVE_SAWTOOTH;
    voice1.pulseWidth = PSG_PULSE_SQUARE;
    defineVoice( 1, &voice1 );

    ++position;
}